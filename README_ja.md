# Gemini Tree Token Counter (gtc)

[ğŸ‡ºğŸ‡¸ English](./README.md)

ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚„GitHubãƒªãƒã‚¸ãƒˆãƒªã®Geminiãƒ¢ãƒ‡ãƒ«ç”¨ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã‚’æ¦‚ç®—ã—ã€ãƒ„ãƒªãƒ¼æ§‹é€ ã§å¯è¦–åŒ–ã™ã‚‹CLIãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
ã€Œã‚¿ã‚¤ãƒ ãƒˆãƒ©ãƒ™ãƒ«æ©Ÿèƒ½ã€ã«ã‚ˆã‚Šã€éå»ã®ç‰¹å®šã®ã‚³ãƒŸãƒƒãƒˆã‚„æ—¥ä»˜æ™‚ç‚¹ã§ã®ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã‚’åˆ†æã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

> **æ³¨æ„:** ãƒˆãƒ¼ã‚¯ãƒ³è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã¯ `smartprocure/gemini-token-estimator` ã®æ­£è¦è¡¨ç¾ãƒ­ã‚¸ãƒƒã‚¯ã‚’ç§»æ¤ã—ãŸã‚‚ã®ã§ã‚ã‚Šã€é€Ÿåº¦ã‚’é‡è¦–ã—ãŸæ¦‚ç®—å€¤ã§ã™ã€‚å¤šãã®ã‚±ãƒ¼ã‚¹ã§å®Ÿéš›ã®Geminiãƒˆãƒ¼ã‚¯ãƒŠã‚¤ã‚¶ãƒ¼ã¨æ¯”è¼ƒã—ã¦èª¤å·®10%ä»¥å†…ã«åã¾ã‚Šã¾ã™ãŒã€å³å¯†ãªå€¤ã§ã¯ãªã„ç‚¹ã«ã”ç•™æ„ãã ã•ã„ã€‚

## ç‰¹å¾´

- ğŸš€ **é«˜é€Ÿãªæ¦‚ç®—**: æ­£è¦è¡¨ç¾ãƒ™ãƒ¼ã‚¹ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’ä½¿ç”¨ï¼ˆAPIã‚³ãƒ¼ãƒ«ä¸è¦ï¼‰ã€‚
- ğŸŒ³ **ãƒ„ãƒªãƒ¼å¯è¦–åŒ–**: ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¨å„ãƒãƒ¼ãƒ‰ã®ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚
- ğŸ™ **GitHubå¯¾å¿œ**: ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã‚’URLæŒ‡å®šã§ç›´æ¥åˆ†æã§ãã¾ã™ã€‚
- â³ **ã‚¿ã‚¤ãƒ ãƒˆãƒ©ãƒ™ãƒ«**: ç‰¹å®šã®ãƒ–ãƒ©ãƒ³ãƒã€ã‚³ãƒŸãƒƒãƒˆãƒãƒƒã‚·ãƒ¥ã€ã‚ã‚‹ã„ã¯æ—¥ä»˜ã‚’æŒ‡å®šã—ã¦åˆ†æã§ãã¾ã™ï¼ˆä¾‹ï¼šã€Œ2023å¹´æ™‚ç‚¹ã§ã®ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã®è¦æ¨¡ã¯ï¼Ÿã€ï¼‰ã€‚
- ğŸ“„ **ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‡ºåŠ›**: ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹ã‚’é€£çµã—ã¦å‡ºåŠ›ã§ãã¾ã™ï¼ˆLLMã¸ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ä½œæˆã«ä¾¿åˆ©ã§ã™ï¼‰ã€‚

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### å‹•ä½œè¦ä»¶
- Python 3.7ä»¥ä¸Š
- **Git** (`git` ã‚³ãƒãƒ³ãƒ‰ãŒã‚·ã‚¹ãƒ†ãƒ ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™)

### pipã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
pip install gemini-tree-token-counter
```

## ä½¿ã„æ–¹

åŸºæœ¬çš„ã«ã¯ã€å¯¾è±¡ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã ã‘ã§ã™ã€‚

```bash
gtc
```

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³

- `target`: ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‘ã‚¹ã¾ãŸã¯GitHub URLï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰
- `-d`, `--dir`: åˆ†æå¯¾è±¡ã®ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒ‡å®šï¼ˆè¤‡æ•°æŒ‡å®šå¯ï¼‰
- `-c`, `--content`: ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹ã‚‚è¡¨ç¤ºã™ã‚‹ï¼ˆLLMã¸ã®å…¥åŠ›ç”¨ãƒ†ã‚­ã‚¹ãƒˆä½œæˆãªã©ã«ä¾¿åˆ©ï¼‰
- `-b`, `--branch`: ç‰¹å®šã®Gitãƒ–ãƒ©ãƒ³ãƒã‚’ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã—ã¦åˆ†æ
- `--commit`: ç‰¹å®šã®Gitã‚³ãƒŸãƒƒãƒˆãƒãƒƒã‚·ãƒ¥ã‚’ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã—ã¦åˆ†æ
- `--date`: æŒ‡å®šã—ãŸæ—¥ä»˜ï¼ˆYYYY-MM-DDï¼‰ä»¥å‰ã®æœ€æ–°ã‚³ãƒŸãƒƒãƒˆã‚’ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã—ã¦åˆ†æ
- `--first`: ãƒªãƒã‚¸ãƒˆãƒªã®æœ€åˆã®ã‚³ãƒŸãƒƒãƒˆï¼ˆInitial Commitï¼‰ã‚’ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã—ã¦åˆ†æ

### ä½¿ç”¨ä¾‹

```bash
# 1. ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
gtc                       # ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ã‚¹ã‚­ãƒ£ãƒ³
gtc . -d src -d lib       # ç‰¹å®šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã¿ã‚¹ã‚­ãƒ£ãƒ³
gtc . -c > context.txt    # ã™ã¹ã¦ã®ã‚³ãƒ¼ãƒ‰ã¨ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºåŠ›

# 2. GitHubãƒªãƒã‚¸ãƒˆãƒª
gtc https://github.com/user/repo
gtc https://github.com/user/repo -b develop

# 3. ã‚¿ã‚¤ãƒ ãƒˆãƒ©ãƒ™ãƒ«ï¼ˆGitå±¥æ­´ï¼‰
gtc . --date 2023-01-01   # å»å¹´ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¦æ¨¡ã¯ï¼Ÿ
gtc . --first             # æœ€åˆã®ã‚³ãƒŸãƒƒãƒˆæ™‚ã®è¦æ¨¡ã¯ï¼Ÿ
```

## å‡ºåŠ›ä¾‹ (ver 0.1.2)

```text
$ gtc
Source       : .
Working Path : /Users/sakasegawa/src/github.com/nyosegawa/gemini-tree-token-counter
------------------------------------------------------------
â”œâ”€â”€ src/ (5125 tokens)
â”‚   â””â”€â”€ gemini_tree_token_counter/ (5125 tokens)
â”‚       â”œâ”€â”€ __init__.py (11 tokens)
â”‚       â””â”€â”€ main.py (5114 tokens)
â”œâ”€â”€ tests/ (2596 tokens)
â”‚   â”œâ”€â”€ __init__.py (0 tokens)
â”‚   â””â”€â”€ test_tokenizer.py (2596 tokens)
â”œâ”€â”€ .gitignore (682 tokens)
â”œâ”€â”€ LICENSE (196 tokens)
â”œâ”€â”€ pyproject.toml (249 tokens)
â”œâ”€â”€ README.md (760 tokens)
â””â”€â”€ README_ja.md (650 tokens)
------------------------------------------------------------
Grand Total Tokens: 10258
------------------------------------------------------------
```

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¨è¬è¾

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè‡ªä½“ã¯ **MIT License** ã®ä¸‹ã§æä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚

ãŸã ã—ã€ãƒˆãƒ¼ã‚¯ãƒŠã‚¤ã‚¶ãƒ¼ã®æ­£è¦è¡¨ç¾ãƒ­ã‚¸ãƒƒã‚¯éƒ¨åˆ†ã¯ **GovSpend** ã«ã‚ˆã‚‹ [gemini-token-estimator](https://github.com/smartprocure/gemini-token-estimator) ã®ç§»æ¤ã§ã‚ã‚Šã€åŒéƒ¨åˆ†ã¯ **ISC License** ãŒé©ç”¨ã•ã‚Œã¾ã™ã€‚

### Tokenizer Logic Copyright
Copyright (c) GovSpend

Permission to use, copy, modify, and/or distribute this software for any purpose with or without fee is hereby granted, provided that the above copyright notice and this permission notice appear in all copies.